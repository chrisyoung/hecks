#!/bin/bash
set -xe

HECKS_DIR=`pwd`
PIZZA_BUILDER_DIR='hecks-examples/pizza_builder'
BINARY='./pizza_builder pizzas create'
BINARY_ATTRIBUTES='{"name":"White Pizza","description":"white sauce and chicken","chef":{"name":"Chef Ramsey"},"toppings":[{"name":"chicken"}]}'

rm -rf packages/binary
cd $PIZZA_BUILDER_DIR
hecks package binary -c false
cd packages/binary/build/osx
$BINARY "$BINARY_ATTRIBUTES"

cd $HECKS_DIR
